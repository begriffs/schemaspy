<html>
<head>
<title>SchemaSpy Database Types</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
    body   { color: #000000; background-color: #F7F7F7; font-family: verdana, times, sans-serif; }
    .entry { font-weight: bold; padding-left: 12px;}
    .def   { font-weight: normal; padding-left: 24px; padding-bottom: 12px;}
    .sqlQueries { background-color: #E7E7E7; vertical-align: top; border-style: none; margin: 0; }
    .sqlQueries th  { padding: 0px 4px; background-color: #9BAB96; text-align: left; }
    .sqlQueries td  { padding: 0px 4px; vertical-align: top; }
  </style>
</head>
<body>
<h3><a href='http://schemaspy.sourceforge.net'>SchemaSpy</a> Database Types</h3>

One goal of SchemaSpy is to support a wide range of JDBC-complaint databases.  
It uses the concept of "database types", as specified by .properties files, to
achieve that goal.  
"Out of the box" SchemaSpy supports a multitude of databases.  
If your database isn't currently supported or needs to be customized then continue reading.

<p>For SchemaSpy to support your database it must:
<ol>
    <li>Have JDBC drivers available</li>
    <li>The JDBC drivers must provide JDBC metadata</li>
</ol>

The vast majority of relational databases have JDBC drivers that provide appropriate metadata.

<h4>Database Type .property Files</h4>
<p>The -t command-line parameter specified which type of database you're dealing with.
For example: <code>-t mysql</code> says to use the MySQL-specific database type file
named <code>mysql.properties</code>.  
This file, by default, lives in the SchemaSpy jar file, but if you specify a path to the
file then it can also reside on your file system so you can easily modify / experiment
with the file's settings.

<p>Let's start with a simple (and typical) database type file called <code>mysql.properties</code>.
The basic file looks like this:
<pre>
  description=MySQL

  driver=com.mysql.jdbc.Driver

  connectionSpec=jdbc:mysql://&lt;host&gt;/&lt;db&gt;
  host=hostname[:port] host where database resides with optional port
  db=database name
</pre>

<h4>Basic entries</h4>
<div class='entry'>description</div>
 <div class='def'>
   Simple description of the type of database.
 </div>
<div class='entry'>driver</div>
 <div class='def'>
  The full name of the driver class that provides the required JDBC services.
  This class name is provided by the database driver vendor.
 </div>
<div class='entry'>connectionSpec</div>
 <div class='def'>
  The format of the connection spec is defined by the database driver vendor.
  It usually has a format similar to the one used for MySQL: <code>jdbc:mysql://&lt;host&gt;/&lt;db&gt;</code>
  <br>The names surrounded by &lt; and &gt; are required by the driver vendor
  and will become required parameters on the SchemaSpy command line.
  Those command line values will be substituted into the connection spec
  before it is used to connect to the database.  
 </div>
<div class='entry'>host and db</div>
 <div class='def'>
  These entries provide documentation for the names surrounded by &lt; and &gt; 
  in <code>connectionSpec</code>.
  For example, if you forget to specify -host on the command line then you will
  get an error message that includes the text:
   <p><code>hostname[:port] host where database resides with optional port</code>
  <p>The idea is to have meaningful error messages / descriptions of these 
  database-specific parameters.
 </div>

<h4>Remaining entries</h4>
The remaining entries in the .properties file are <b>not required</b> for most databases.
They're typically used to provide functionality that either isn't provided by the 
JDBC metadata services or when those services are in some way inappropriate 
(performance, incorrect results, etc.).

<p>For the SQL-based entries you can use any of the following optional
"named parameters" in the SQL.  
They will be substituted with appropriate values at runtime.
<code><ul>
<li>:schema</li>
<li>:owner</li>
<li>:table</li>
<li>:view</li>
</ul></code>

<div class='entry'>dbThreads</div>
 <div class='def'>
  If your driver returns failures like "stream already closed" then its metadata
  services probably aren't thread safe and you'll have to specify a value of 1 or
  or specify "-dbThreads 1" on the command line.
 </div>

<table class="sqlQueries" border="1" cellpadding="0" cellspacing="1">
 <tr>
  <th>Name</th>
  <th>Req'd Column(s)</th>
  <th>Description</th>
  <th>Scope of query</th>
 </tr>
 <tr>
  <td>selectViewSql</td>
  <td>text</td>
  <td>Returns the details of a specific view, usually the SQL used to create the view.</td>
  <td>Single view</td>
 </tr>
 <tr>
  <td>selectCheckConstraintsSql</td>
  <td>constraint_name, table_name, text</td>
  <td>Returns check constraint details of all check contraints, where 'text' is usually 
  the SQL used to create the constraint.</td>
  <td>Database</td>
 </tr>
 <tr>
  <td>selectTableIdsSql</td>
  <td>table_id, table_name</td>
  <td>Returns a unique ID for each table.  
  This is useful for databases (such as DB2) that may give error messages with just 
  table IDs instead of names.</td>
  <td>Database</td>
 </tr>
 <tr>
  <td>selectIndexIdsSql</td>
  <td>index_id, index_name, table_name</td>
  <td>Returns a unique ID for each table index.  
  This is useful for databases (such as DB2) that may give error messages with just 
  index IDs instead of names.</td>
  <td>Database</td>
 </tr>
 <tr>
  <td>selectTableCommentsSql</td>
  <td>table_name, comments</td>
  <td>Returns comments associated with tables.  
  Useful if the database driver doesn't return this info or if it's persisted elsewhere.</td>  
  <td>Database</td>
 </tr>
 <tr>
  <td>selectColumnCommentsSql</td>
  <td>table_name, column_name, comments</td>
  <td>Returns comments associated with table columns.  
  Useful if the database driver doesn't return this info or if it's persisted elsewhere.</td>  
  <td>Database</td>
 </tr>
</table>

selectCheckConstraintsSql
selectColumnCommentsSql
selectIndexIdsSql
selectTableCommentsSql
selectTableIdsSql
selectViewSql
selectRowCountSql
selectIndexesSql

</body>
</html>